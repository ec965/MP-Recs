(this["webpackJsonpmp-recs"]=this["webpackJsonpmp-recs"]||[]).push([[0],{134:function(e){e.exports=JSON.parse('{"email":"enoch965@gmail.com","key":"200380484-61d23599c8dea30b4c454e2229afae3e","lat":37.61,"lon":-122.45,"distance":100}')},179:function(e,t,a){e.exports=a(189)},189:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(11),o=a.n(l),i=a(132),c=a(133),s=a(64),m=a(156),u=a(155),g=a(134),h=a(239),d=a(267),p=a(17),f=a(254),E=a(255),b=a(248),v=a(253),S=a(247),y=a(191),j=a(256),w=a(272),x=a(85),C=a(240),R=a(236);function I(e){var t=e.member;return n.a.createElement(R.a,null,n.a.createElement(h.a,{container:!0,direction:"column",alignContent:"flex-start"},n.a.createElement(h.a,{item:!0},n.a.createElement(C.a,{href:t.url,target:"_blank"},n.a.createElement(x.a,{variant:"h5"},t.name))),n.a.createElement(h.a,{item:!0},n.a.createElement(x.a,{variant:"subtitle1"},"(V",e.flashGrade," - V",e.projectGrade,")"))))}var k=a(241),T=a(242),G=a(135),P=a.n(G),O=a(138),N=a.n(O),L=a(136),F=a.n(L),M=a(137),D=a.n(M),q=Object(k.a)({tablePageControl:{flexShrink:0}});function H(e){var t=q(),a=e.count,r=e.page,l=e.rowsPerPage,o=e.onChangePage;return n.a.createElement("div",{className:t.tablePageControl},n.a.createElement(T.a,{onClick:function(e){o(e,0)},disabled:0===r},n.a.createElement(P.a,null)),n.a.createElement(T.a,{onClick:function(e){o(e,r-1)},disabled:0===r},n.a.createElement(F.a,null)),n.a.createElement(T.a,{onClick:function(e){o(e,r+1)},disabled:r>=Math.ceil(a/l)-1},n.a.createElement(D.a,null)),n.a.createElement(T.a,{onClick:function(e){o(e,Math.max(0,Math.ceil(a/l)-1))},disabled:r>=Math.ceil(a/l)-1},n.a.createElement(N.a,null)))}var V=a(265),z=a(246),B=a(251),U=a(249),J=a(192),_=a(250),A=a(143),K=a.n(A),W=a(144),$=a.n(W),Y=a(142),Q=a.n(Y),X=a(140),Z=a.n(X),ee=a(139),te=a.n(ee),ae=a(141),re=a.n(ae),ne=a(243),le=Object(k.a)({root:{width:"7ch"},day:{width:"5ch"}});function oe(){var e=le();return n.a.createElement(h.a,{container:!0,justify:"center",alignItems:"center",direction:"column",spacing:1},n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(ne.a,{variant:"rect",style:{width:"3em",height:"3em",borderRadius:"10px"}})),n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(ne.a,{className:e.day})),n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(ne.a,{className:e.root})))}var ie=a(268),ce=Object(k.a)((function(e){return{popover:{pointerEvents:"none"},paper:{padding:e.spacing(1)}}}));function se(e){var t=ce(),a=n.a.useState(null),r=Object(p.a)(a,2),l=r[0],o=r[1],i=function(e){o(null)},c=Boolean(l);return n.a.createElement("div",null,n.a.createElement("div",{onMouseEnter:function(e){o(e.currentTarget)},onMouseLeave:i},e.children),n.a.createElement(ie.a,{id:"hover-popover",className:t.popover,classes:{paper:t.paper},open:c,anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:i,disableRestoreFocus:!0},n.a.createElement(h.a,{container:!0,direction:"column",spacing:1},""!==e.note&&n.a.createElement(h.a,{item:!0},n.a.createElement(x.a,{variant:e.noteVariant},e.note)),e.note2&&n.a.createElement(h.a,{item:!0},e.note2))))}var me=Object(k.a)({locationList:{maxHeight:120,width:"90%",overflow:"auto"},locationListItem:{},tableCellData:{padding:10,marginRight:6,marginLeft:6}});function ue(e){var t=e.name,a=e.locationArr,r=e.lat,l=e.lon;return n.a.createElement(h.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",spacing:3},n.a.createElement(h.a,{item:!0},n.a.createElement(z.a,{variant:"contained",style:{backgroundColor:"#d32f2f",color:"#fff"},href:"https://www.youtube.com/results?search_query="+t+"+"+a[a.length-1]+"+"+a[a.length-2],target:"_blank"},"YouTube")),n.a.createElement(h.a,{item:!0},n.a.createElement(z.a,{href:"https://vimeo.com/search?q="+t+"+"+a[a.length-1]+"+"+a[a.length-2],target:"_blank",variant:"contained",style:{backgroundColor:"#19B7EA",color:"#fff"}},"Vimeo")),n.a.createElement(h.a,{item:!0},n.a.createElement(z.a,{variant:"contained",style:{backgroundColor:"#0F9D58",color:"#fff"},href:"https://www.google.com/maps/@"+r+","+l+",18z",target:"_blank"},"Maps")),n.a.createElement(h.a,{item:!0},n.a.createElement(z.a,{href:"https://forecast.weather.gov/MapClick.php?lon="+l+"&lat="+r,target:"_blank",variant:"contained",style:{backgroundColor:"#0d47a1",color:"#fff"}},"Weather")))}function ge(e){var t=e.day;return n.a.createElement(se,{noteVariant:"body2",note:""!==t.tempHighNote?"Day: "+t.tempHighNote:"",note2:n.a.createElement(x.a,{variant:"body2"},"Night: "+t.tempLowNote)},n.a.createElement(h.a,{container:!0,justify:"center",alignItems:"center",direction:"column",spacing:1},n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement("img",{src:t.icon,alt:"unavailable",style:{borderRadius:"10px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",maxWidth:"3em"}})),n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(x.a,{variant:"body1"},t.name)),n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(x.a,{variant:"body2"},""!==t.tempHigh?t.tempHigh+" - "+t.tempLow+"\xb0F":t.tempLow+"\xb0F"))))}function he(e){var t=me(),a=e.align,r=e.route,l=n.a.useState(!1),o=Object(p.a)(l,2),i=o[0],c=o[1],s=n.a.useState(!1),m=Object(p.a)(s,2),u=(m[0],m[1]),g=n.a.useState([]),d=Object(p.a)(g,2),f=d[0],E=d[1],v=r.location,y=r.url.slice(0,38)+"stats/"+r.url.slice(38);function j(){if(0===f.length){E([1]);var e="https://api.weather.gov/points/"+r.latitude+","+r.longitude;console.log("fetching weather based on lat/lon"),fetch(e).then((function(e){return e.json()})).then((function(e){console.log("fetching weather based on grid"),fetch(e.properties.forecast).then((function(e){return e.json()})).then((function(e){var t=[],a=0;e.properties.periods[0].isDaytime?t[0]={name:"Today",tempHigh:e.properties.periods[0].temperature,tempHighNote:e.properties.periods[0].shortForecast,icon:e.properties.periods[0].icon,tempLow:e.properties.periods[1].temperature,tempLowNote:e.properties.periods[1].shortForecast}:(a=1,t[0]={name:"Tonight",tempHigh:"",tempHighNote:"",icon:e.properties.periods[0].icon,tempLow:e.properties.periods[0].temperature,tempLowNote:e.properties.periods[0].shortForecast});for(var r=2-a;r<e.properties.periods.length-a;r+=2)t[(r+a)/2]={name:e.properties.periods[r].name.substring(0,3),tempHigh:e.properties.periods[r].temperature,tempHighNote:e.properties.periods[r].shortForecast,icon:e.properties.periods[r].icon,tempLow:e.properties.periods[r+1].temperature,tempLowNote:e.properties.periods[r+1].shortForecast};console.log(t),E(t)}),(function(e){u(!0)})).catch(console.error)}),(function(e){u(!0)})).catch(console.error)}}return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.a,{hover:!0,key:r.id,onClick:function(){c(!i),j()}},n.a.createElement(b.a,{component:"th",scope:"row"},n.a.createElement(T.a,{size:"small",onClick:function(){c(!i),j()}},i?n.a.createElement(te.a,null):n.a.createElement(Z.a,null))),n.a.createElement(b.a,{className:t.tableCellData,align:a},n.a.createElement(C.a,{href:r.imgMedium,target:"_blank"},""===r.imgSqSmall?n.a.createElement(re.a,{fontSize:"large",color:"secondary",style:{width:"100px",height:"100px"}}):n.a.createElement("img",{src:r.imgSqSmall,alt:"Unavailable"}))),n.a.createElement(b.a,{className:t.tableCellData,align:a},n.a.createElement(C.a,{href:r.url,target:"_blank"},r.name)),n.a.createElement(b.a,{className:t.tableCellData,align:a},r.rating),n.a.createElement(b.a,{className:t.tableCellData,align:a},n.a.createElement(C.a,{href:y,target:"_blank"},n.a.createElement(Q.a,{style:{fontSize:12}}),r.stars," / ",r.starVotes)),n.a.createElement(b.a,{className:t.tableCellData,align:a},r.toDo?n.a.createElement(K.a,null):n.a.createElement($.a,null)),n.a.createElement(b.a,{className:t.tableCellData,align:a},n.a.createElement(U.a,{className:t.locationList,dense:!0},v.map((function(e,a){return n.a.createElement(J.a,{key:a},n.a.createElement(_.a,{className:t.locationListItem,primary:e}))}))))),n.a.createElement(S.a,null,n.a.createElement(b.a,{style:{paddingBottom:0,paddingTop:0},colSpan:7},n.a.createElement(B.a,{in:i,timeout:"auto"},n.a.createElement(V.a,{margin:1},n.a.createElement(h.a,{container:!0,direction:"column",justify:"center",alignContent:"center",spacing:3},n.a.createElement(h.a,{item:!0},n.a.createElement(ue,{name:r.name,locationArr:r.location,lat:r.latitude,lon:r.longitude})),n.a.createElement(h.a,{item:!0},n.a.createElement(h.a,{container:!0,direciton:"row",spacing:3,justify:"center",alignContent:"center"},1===f[0]&&n.a.createElement(n.a.Fragment,null,[0,1,2,3,4,5,6].map((function(e){return n.a.createElement(h.a,{key:e,item:!0},n.a.createElement(oe,null))}))),1!==f[0]&&n.a.createElement(n.a.Fragment,null,f.map((function(e,t){return n.a.createElement(h.a,{item:!0,key:t},n.a.createElement(ge,{day:e}))})))))))))))}var de=a(252),pe=a(270),fe=Object(k.a)({tableCellHeading:{padding:10,marginRight:6,marginLeft:6}});function Ee(e){var t=fe(),a=e.align,r=e.headerRowNames,l=e.orderBy,o=e.order,i=e.onRequestSort;return n.a.createElement(de.a,null,n.a.createElement(S.a,null,e.children,r.map((function(e){return n.a.createElement(b.a,{key:e.id,className:t.tableCellHeading,align:a,sortDirection:l===e.id&&o},"image"!==e.id?n.a.createElement(pe.a,{active:l===e.id,direction:l===e.id?o:"asc",onClick:(r=e.id,function(e){i(e,r)})},e.label):n.a.createElement(n.a.Fragment,null,e.label));var r}))))}var be=Object(k.a)({root:{marginTop:20,paddingTop:10},tableContainer:{}});function ve(e,t,a){return e[a]>t[a]?1:e[a]<t[a]?-1:0}function Se(e,t){return"asc"===e?function(e,a){return ve(e,a,t)}:function(e,a){return-ve(e,a,t)}}function ye(e,t){return e.sort(t)}function je(e){var t=e.align,a=e.recList,r=e.page,l=e.rowsPerPage,o=e.handleChangePage,i=e.handleChangeRowsPerPage,c=e.member,s=e.flashGrade,m=e.projectGrade,u=be(),g=n.a.useState("asc"),h=Object(p.a)(g,2),d=h[0],x=h[1],C=n.a.useState("name"),R=Object(p.a)(C,2),k=R[0],T=R[1];return n.a.createElement(y.a,{className:u.root},n.a.createElement(I,{member:c,flashGrade:s,projectGrade:m}),n.a.createElement(v.a,{className:u.tableContainer},n.a.createElement(f.a,{size:"small",padding:"none"},n.a.createElement(Ee,{headerRowNames:[{id:"image",label:"Image"},{id:"name",label:"Name"},{id:"rating",label:"Rating"},{id:"stars",label:"Stars / Votes"},{id:"toDo",label:"To Do"},{id:"location",label:"Location"}],align:t,order:d,orderBy:k,onRequestSort:function(e,t){x(k===t&&"asc"===d?"desc":"asc"),T(t)}},n.a.createElement(b.a,{scope:"row",component:"th"})),n.a.createElement(E.a,null,(l>0?ye(a,Se(d,k)).slice(r*l,r*l+l):ye(a,Se(d,k))).map((function(e){return n.a.createElement(he,{align:t,key:e.id,route:e})}))),n.a.createElement(j.a,null,n.a.createElement(S.a,null,n.a.createElement(w.a,{rowsPerPageOptions:[5,10,25,50,{label:"All",value:-1}],count:a.length,rowsPerPage:l,labelRowsPerPage:"Routes / page",page:r,SelectProps:{native:!0},onChangePage:o,onChangeRowsPerPage:i,ActionsComponent:H}))))))}var we=a(266),xe=a(259),Ce=a(258),Re=a(145),Ie=a.n(Re),ke=a(146),Te=a.n(ke);function Ge(e){return n.a.createElement("div",{role:"tabpanel",hidden:e.value!==e.index,id:"simple-tabpanel"+e.index},e.value===e.index&&n.a.createElement(V.a,null,e.children))}function Pe(e){var t=e.value,a=e.handleChange,r=e.tab0,l=e.hideTab0,o=e.tab1,i=e.hideTab1;return n.a.createElement("div",null,n.a.createElement(Ce.a,{position:"sticky"},n.a.createElement(we.a,{value:t,onChange:a,centered:!0},n.a.createElement(xe.a,{icon:n.a.createElement(Ie.a,null),label:"SEARCH",disabled:l}),n.a.createElement(xe.a,{icon:n.a.createElement(Te.a,null),label:"CLIMBS",disabled:i}))),n.a.createElement(Ge,{value:t,index:0},r),n.a.createElement(Ge,{value:t,index:1},o))}var Oe=a(41),Ne=a(19),Le=a(151),Fe=a.n(Le),Me=a(273),De=a(4),qe=Object(De.a)((function(e){return{tooltip:{backgroundColor:e.palette.primary.light,color:"#fff",fontSize:e.typography.pxToRem(14)}}}))(Me.a);function He(e){return n.a.createElement(n.a.Fragment,null,e.show?n.a.createElement(qe,{placement:"top",arrow:!0,title:e.title},e.children):n.a.createElement(n.a.Fragment,null," ",e.children))}var Ve=a(260);function ze(e){var t=Object(Oe.c)(e),a=Object(p.a)(t,2),r=a[0],l=a[1];return n.a.createElement(He,{title:e.note,show:e.showToolTip},n.a.createElement(Ve.a,Object.assign({margin:"normal",variant:"outlined",size:"small",id:e.id,label:e.label,name:e.name,autoComplete:e.autoComplete,error:l.touched&&l.error,helperText:l.touched&&l.error?l.error:" "},r)))}var Be=a(96),Ue=a(261),Je=a(269),_e=Object(k.a)((function(e){return{rememberMe:{marginTop:5,marginLeft:5,fontSize:99}}}));function Ae(e){var t=_e(),a=e.name,r=e.id,l=e.label,o=Object(Oe.c)(Object(Be.a)(Object(Be.a)({},e),{},{type:"checkbox"})),i=Object(p.a)(o,2),c=i[0];i[1];return n.a.createElement(Ue.a,{className:t.rememberMe,labelPlacement:"start",control:n.a.createElement(He,{title:e.note,arrow:!0,show:e.showToolTip},n.a.createElement(Je.a,Object.assign({id:a,name:r,color:"primary"},c))),label:l})}var Ke=a(199),We=a(257),$e=a(196),Ye=a(195),Qe=a(198);var Xe=function(e){var t=Object(Oe.c)(Object(Be.a)({},e)),a=Object(p.a)(t,2),r=a[0],l=a[1],o=n.a.useState(""),i=Object(p.a)(o,2),c=i[0],s=i[1];return n.a.createElement(Ye.a,{fullWidth:!0,error:l.touched&&l.error,size:"small"},n.a.createElement(Ke.a,{id:e.id+"-label"},e.label),n.a.createElement(Qe.a,Object.assign({labelId:e.id+"-label",id:e.id,name:e.name,value:c,onChange:function(e){s(e.target.value)}},r),n.a.createElement(We.a,{value:-1},n.a.createElement("em",null,"Find my grade")),e.menuItems.map((function(e,t){return n.a.createElement(We.a,{key:t,value:e},"V"+String(e))}))),n.a.createElement($e.a,null,l.touched&&l.error?l.error:" "))},Ze=Object(k.a)((function(e){return{root:{paddingLeft:20,paddingRight:20,paddingTop:20,paddingBottom:20,marginTop:"10vh"},locationButton:{color:e.palette.info.main}}}));function et(e){var t=Ze(),a=e.handleFormSubmit,r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17];return n.a.createElement(y.a,{className:t.root},n.a.createElement(Oe.b,{enableReinitialize:!0,initialValues:{email:localStorage.getItem("email")||"",rememberMe:"true"===localStorage.getItem("rememberMe")||!1,lat:localStorage.getItem("lat")||"",lon:localStorage.getItem("lon")||"",distance:localStorage.getItem("distance")||"",maxResults:localStorage.getItem("maxResults")||"",flashGrade:localStorage.getItem("flashGrade")||"",projectGrade:localStorage.getItem("projectGrade")||""},validationSchema:Ne.c({email:Ne.e().email("This isn't an email").required("Required"),lat:Ne.b().required("Required").min(-90,"Too lateral, enter a higher number").max(90,"Too lateral, enter a lower number"),lon:Ne.b().required("Required").min(-180,"Too long, enter a higher number").max(180,"Too long, enter a lower number"),distance:Ne.b().required("Required").positive("Distance isn't negative").max(200,"Choose a shorter distance"),maxResults:Ne.b().required("Required").integer().max(500,"Choose less results"),flashGrade:Ne.b().required("Required").positive().min(-1,"Hueco grades go from V0-V17").lessThan(Ne.d("projectGrade"),"Flash grade must be lower than project grade."),projectGrade:Ne.b().required("Required").integer().max(17,"Hueco grades go from V0-V17").greaterThan(Ne.d("flashGrade"),"Project grade must be higher than flash grade.")}),onSubmit:a},(function(e){e.values;var a=e.setFieldValue;return n.a.createElement(Oe.a,{autoComplete:"on"},n.a.createElement(h.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:0},n.a.createElement(x.a,{variant:"h5"},"Boulder Field"),n.a.createElement(h.a,{container:!0,item:!0,direction:"row",justify:"flex-start",alignItems:"center",alignContent:"flex-start",spacing:2},n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(ze,{id:"email",name:"email",label:"Email",autoComplete:"email",showToolTip:!0,note:"Enter your Mountain Project email"})),n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(He,{title:"Get my latitude and longitude",show:!0},n.a.createElement(T.a,{className:t.locationButton,onClick:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){console.log(e.coords),a("lat",e.coords.latitude),a("lon",e.coords.longitude)}),(function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))})):alert("Geolocation is not supported on your browser.")}},n.a.createElement(Fe.a,null))))),n.a.createElement(h.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",alignContent:"center",spacing:2},n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(ze,{id:"lat",name:"lat",label:"Latitude"})),n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(ze,{id:"lon",name:"lon",label:"Longitude"}))),n.a.createElement(h.a,{container:!0,item:!0,direction:"row",justify:"flex-start",alignItems:"center",alignContent:"flex-start",spacing:2},n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(ze,{id:"distance",name:"distance",label:"Distance (miles)",showToolTip:!0,note:"Search radius"})),n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(ze,{id:"maxResults",name:"maxResults",label:"Number of Results"}))),n.a.createElement(h.a,{container:!0,item:!0,direction:"row",justify:"flex-start",alignItems:"center",alignContent:"flex-start",spacing:2},n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(Xe,{id:"flashGrade",name:"flashGrade",label:"Flash Grade",menuItems:r})),n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(Xe,{id:"projectGrade",name:"projectGrade",label:"Project Grade",menuItems:r}))),n.a.createElement(h.a,{container:!0,item:!0,direction:"row",justify:"center",alignItems:"center",alignContent:"center",spacing:2},n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(Ae,{name:"rememberMe",id:"rememberMe",label:"Remember Me",note:"All data is stored locally on your device",showToolTip:!0})),n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(z.a,{className:t.button,type:"submit",variant:"contained",color:"primary"},"Submit")))))})))}Ne.a(Ne.b,"greaterThan",(function(e,t){return this.test({name:"greaterThan",exclusive:!1,message:t||"${path} must greater than ${reference}.",params:{reference:e.path},test:function(t){return t>this.resolve(e)}})})),Ne.a(Ne.b,"lessThan",(function(e,t){return this.test({name:"lessThan",exclusive:!1,message:t||"${path} must less than ${reference}.",params:{reference:e.path},test:function(t){return t<this.resolve(e)}})}));var tt=a(262),at=Object(k.a)({root:{margin:"2em"}});function rt(e){var t=at();return n.a.createElement(n.a.Fragment,null,n.a.createElement(tt.a,{className:t.root}))}var nt=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={email:"",apiKey:g.key,rememberMe:null,lat:null,lon:null,distance:null,maxResults:null,member:JSON.parse(localStorage.getItem("member"))||"",recList:JSON.parse(localStorage.getItem("recList"))||[],flashGrade:localStorage.getItem("flashGrade")||0,projectGrade:localStorage.getItem("projectGrade")||17,fetchError:{getUser:null,getTicks:null,getRoutes:null,getRoutesForLatLon:null,getToDos:null,weather:null},apiError:{getUser:null,getTicks:null,getRoutes:null,getRoutesForLatLon:null,getToDos:null},currentTab:0,currentPage:0,rowsPerPage:5,loading:!1,haveResults:"true"===localStorage.getItem("haveResults")||!1},r.handleFormSubmit=r.handleFormSubmit.bind(Object(s.a)(r)),r.handleChangeTab=r.handleChangeTab.bind(Object(s.a)(r)),r.handleChangePage=r.handleChangePage.bind(Object(s.a)(r)),r.handleChangeRowsPerPage=r.handleChangeRowsPerPage.bind(Object(s.a)(r)),r}return Object(c.a)(a,[{key:"handleChangeTab",value:function(e,t){this.setState({currentTab:t})}},{key:"handleChangePage",value:function(e,t){this.setState({currentPage:t})}},{key:"handleChangeRowsPerPage",value:function(e){this.setState({rowsPerPage:parseInt(e.target.value,10),currentPage:0})}},{key:"handleFormSubmit",value:function(e,t){var a=t.setSubmitting;console.log("submit button clicked"),this.setState({loading:!0}),this.setState({email:e.email,rememberMe:e.rememberMe,lat:e.lat,lon:e.lon,distance:e.distance,maxResults:e.maxResults,flashGrade:e.flashGrade,projectGrade:e.projectGrade}),console.log("local storage bool",localStorage.getItem("email")!==this.state.email,localStorage.getItem("rememberMe")!==this.state.rememberMe.toString(),localStorage.getItem("lat")!==this.state.lat,localStorage.getItem("lon")!==this.state.lon,localStorage.getItem("distance")!==this.state.distance,localStorage.getItem("maxResults")!==this.state.maxResults,localStorage.getItem("member")!==JSON.stringify(this.state.member),localStorage.getItem("flashGrade")!==this.state.flashGrade.toString(),localStorage.getItem("projectGrade")!==this.state.projectGrade.toString()),localStorage.getItem("email")!==this.state.email||localStorage.getItem("rememberMe")!==this.state.rememberMe.toString()||localStorage.getItem("lat")!==this.state.lat||localStorage.getItem("lon")!==this.state.lon||localStorage.getItem("distance")!==this.state.distance||localStorage.getItem("maxResults")!==this.state.maxResults||localStorage.getItem("member")!==JSON.stringify(this.state.member)||localStorage.getItem("flashGrade")!==this.state.flashGrade.toString()||localStorage.getItem("projectGrade")!==this.state.projectGrade.toString()?(this.setState({fetchError:{getUser:null,getTicks:null,getRoutes:null,getRoutesForLatLon:null,getToDos:null,weather:null},apiError:{getUser:null,getTicks:null,getRoutes:null,getRoutesForLatLon:null,getToDos:null}}),this.getName(),this.getClimbs()):this.setState({currentTab:1,haveResults:!0,loading:!1}),this.state.rememberMe?(localStorage.setItem("email",this.state.email),localStorage.setItem("rememberMe",this.state.rememberMe),localStorage.setItem("lat",this.state.lat),localStorage.setItem("lon",this.state.lon),localStorage.setItem("distance",this.state.distance),localStorage.setItem("maxResults",this.state.maxResults),localStorage.setItem("haveResults",this.state.haveResults)):localStorage.clear(),a(!1)}},{key:"getName",value:function(){var e=this;fetch("https://www.mountainproject.com/data/get-user?email="+this.state.email+"&key="+this.state.apiKey).then((function(e){return e.json()})).then((function(t){1===t.success?(e.setState({member:t}),e.state.rememberMe?localStorage.setItem("member",JSON.stringify(e.state.member)):localStorage.clear()):e.setState({apiError:{getUser:!0}})}),(function(t){e.setState({fetchError:{getUser:!0}})})).catch(console.error)}},{key:"getWeather",value:function(e,t){var a=this;if(!(t>e.length-1)){var r=e[t].latitude,n=e[t].longitude;fetch("https://api.weather.gov/points/"+r+","+n).then((function(e){return e.json()})).then((function(r){fetch(r.properties.forecast).then((function(e){return e.json()})).then((function(r){e[t].weather=r.properties.periods,console.log(t),a.getWeather(e,t+1)}),(function(e){a.setState({fetchError:{weather:!0}})})).catch(console.error)}),(function(e){a.setState({fetchError:{weather:!0}})})).catch(console.error)}}},{key:"getClimbs",value:function(){var e=this;console.log("getting ticks"),fetch("https://www.mountainproject.com/data/get-ticks?email="+this.state.email+"&key="+this.state.apiKey).then((function(e){return e.json()})).then((function(t){if(1===t.success){for(var a=t.ticks,r="https://www.mountainproject.com/data/get-routes?routeIds=",n=0;n<t.ticks.length;n++)r+=t.ticks[n].routeId+",";r=r.substring(0,r.length-1),r+="&key="+e.state.apiKey,console.log("getting tick route data"),fetch(r).then((function(e){return e.json()})).then((function(t){if(1===t.success){if(-1===e.state.flashGrade||-1===e.state.projectGrade){for(var n=new Array(18).fill(0),l=0;l<t.routes.length;l++)if(t.routes[l].type.includes("Boulder")){var o=t.routes[l].rating.indexOf("V",0),i=t.routes[l].rating.substring(o+1,o+3),c=parseInt(i);isNaN(c)&&(c=0),n[c]+=1}for(var s=0,m=0,u=0;u<n.length;u++)n[u]>n[s]&&(s=u),0!==n[u]&&(m=u);-1===e.state.flashGrade&&e.setState({flashGrade:s}),-1===e.state.projectGrade&&e.setState({projectGrade:m+1})}r="https://www.mountainproject.com/data/get-routes-for-lat-lon?lat="+e.state.lat+"&lon="+e.state.lon+"&maxDistance="+e.state.distance+"&maxResults="+e.state.maxResults+"&minDiff=V"+e.state.flashGrade+"&maxDiff=V"+e.state.projectGrade+"&key="+e.state.apiKey,console.log("getting routes from lat lon"),fetch(r).then((function(e){return e.json()})).then((function(t){if(1===t.success){for(var r=new Set,n=0;n<a.length;n++)r.add(a[n].routeId);console.log(r);for(var l=t.routes.length-1;l>=0;l--)if(r.has(t.routes[l].id))t.routes.splice(l,1);else if(t.routes[l].rating.includes("5.")){var o=t.routes[l].rating.split(" ");if(o.length>=1){var i=o[0];o[0]=o[1],o[1]=i}t.routes[l].rating=o.join().replace(/,/g," ")}var c=t.routes;fetch("https://www.mountainproject.com/data/get-to-dos?email="+e.state.email+"&key="+e.state.apiKey).then((function(e){return e.json()})).then((function(t){if(1===t.success){for(var a=new Set,r=0;r<t.toDos.length;r++)a.add(t.toDos[r]);for(var n=0;n<c.length;n++)a.has(c[n].id)?c[n].toDo=!0:c[n].toDo=!1;e.setState({recList:c}),console.log(e.state.recList),e.state.rememberMe?(localStorage.setItem("recList",JSON.stringify(e.state.recList)),localStorage.setItem("flashGrade",e.state.flashGrade),localStorage.setItem("projectGrade",e.state.projectGrade)):localStorage.clear(),e.setState({currentTab:1,haveResults:!0,loading:!1})}else e.setState({apiError:{getToDos:!0}}),console.error(e.state.apiError)}),(function(t){e.setState({fetchError:{getToDos:!0}}),console.error(e.state.fetchError)})).catch(console.error)}else e.setState({apiError:{getRoutesForLatLon:!0}}),console.error(e.state.apiError)}),(function(t){e.setState({fetchError:{getRoutesForLatLon:!0}}),console.error(e.state.fetchError)})).catch(console.error)}else e.setState({apiError:{getRoutes:!0}}),console.error(e.state.apiError)}),(function(t){e.setState({fetchError:{getRoutes:!0}}),console.error(e.state.fetchError)})).catch(console.error)}else e.setState({apiError:{getTicks:!0}}),console.error(e.state.apiError)}),(function(t){e.setState({fetchError:{getTicks:!0}}),console.error(e.state.fetchError)})).catch(console.error)}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(Pe,{value:this.state.currentTab,handleChange:this.handleChangeTab,hideTab0:!1,tab0:n.a.createElement(h.a,{container:!0,spacing:1,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"60vh"}},n.a.createElement(h.a,{item:!0,xs:!0},n.a.createElement(et,{handleFormSubmit:this.handleFormSubmit})),n.a.createElement(h.a,{item:!0,xs:!0},(this.state.fetchError.getUser||this.state.fetchError.getTicks)&&n.a.createElement(d.a,{severity:"error",style:{marginTop:"5px"}},"This is not a valid Mountain Project email."),this.state.loading&&!(this.state.fetchError.getUser||this.state.fetchError.getTicks)&&n.a.createElement(rt,null))),hideTab1:!this.state.haveResults,tab1:n.a.createElement("div",null,n.a.createElement(h.a,{container:!0,spacing:3,direction:"column",alignItems:"center",justify:"center"},n.a.createElement(h.a,{item:!0},n.a.createElement(je,{member:this.state.member,projectGrade:this.state.projectGrade,flashGrade:this.state.flashGrade,align:"justify",recList:this.state.recList,page:this.state.currentPage,handleChangePage:this.handleChangePage,rowsPerPage:this.state.rowsPerPage,handleChangeRowsPerPage:this.handleChangeRowsPerPage}))))}))}}]),a}(n.a.PureComponent),lt=a(263),ot=a(154),it=a(264),ct=a(152),st=a.n(ct),mt=a(153),ut=a.n(mt),gt=Object(ot.a)({typography:{fontFamily:"Segoe UI, -apple-system"},palette:{primary:{main:st.a[700]},secondary:{main:ut.a[400]}}}),ht=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(lt.a,null),n.a.createElement(it.a,{theme:gt},n.a.createElement(nt,null)))};o.a.render(n.a.createElement(ht,null),document.getElementById("root"))}},[[179,1,2]]]);
//# sourceMappingURL=main.04d110fb.chunk.js.map